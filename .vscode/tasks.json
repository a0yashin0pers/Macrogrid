{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Compile and Run Fortran",
            "type": "shell",
            "linux": {
                "command": "bash",
                "args": [
                    "-c",
                    "mkdir -p build && ifx $IFX_FLAGS -module build \"${file}\" -o \"build/${fileBasenameNoExtension}\" && \"./build/${fileBasenameNoExtension}\""
                ],
                "options": {
                    "cwd": "${workspaceFolder}",
                    "env": {
                        "IFX_FLAGS": "-O3 -fast"
                    }
                }
            },
            "windows": {
                "command": "cmd.exe",
                "args": [
                    "/c",
                    "mkdir build 2>nul & call \"C:\\Program Files (x86)\\Intel\\oneAPI\\setvars.bat\" >nul 2>&1 && ifx /nologo ${env:IFX_FLAGS} /module:build /object:build\\${fileBasenameNoExtension}.obj \"${file}\" -o \"build\\${fileBasenameNoExtension}.exe\" && \"build\\${fileBasenameNoExtension}.exe\""
                ],
                "options": {
                    "cwd": "${workspaceFolder}",
                    "shell": {
                        "executable": "cmd.exe",
                        "args": ["/c"]
                    },
                    "env": {
                        "IFX_FLAGS": "/O3 /fast"
                    }
                }
            },
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": [],
            "detail": "Компиляция и запуск Fortran программы"
        }
    ]
}